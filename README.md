# User Interface
Users can see the following notifications in Teams Channel.

![Message UI](/images/message_ui.jpg =500x)
- The title is generated by GPT4.
- The second line shows the UTC time of the update.
- The body contains a summary of the updates made to different documents by GPT4. For example, in the example provided, three documents were updated.
- Clicking on the link takes you to the official documentation.
- The "Go to commit page" button at the bottom takes you to the commit page on GitHub.

<img src="/GCR-AI-IoT-Team-Operation/_git/DocUpdateNotificationBot?path=/images/message_ui.jpg&version=GBmaster" width="150" ></img>


# Commit Page
https://github.com/MicrosoftDocs/azure-docs/commit/4189b431df9d28d94f54661e223c318335bcb9f2 

You can see that this update involves modifications to three files, which is consistent with the summary provided by GPT4.
The left side shows the version before the update, and the right side shows the version after the update.
![Commit Page](/images/commit_page.jpg)

By clicking on the Preview button in the upper right corner, you can see the updated content more intuitively.
https://github.com/MicrosoftDocs/azure-docs/commit/4189b431df9d28d94f54661e223c318335bcb9f2

![preview_button](/images/preview_button.jpg)
![preview_ui](/images/preview_ui.jpg)

# Implementation :
- Taking Azure OpenAI Documents as an example, each update to the documentation is recorded on this page: https://github.com/MicrosoftDocs/azure-docs/commits/main/articles/ai-services/openai.
- Crawl the update content of each commit.
- Submit the update content to GPT4 for summarization and generate a title.
- Push the summary generated by GPT4 to Teams Channel through the Teams Channel Webhook.
- The program checks for new commits every hour.

# Running Configuration
1. pip install -r requirements
2. Create a .env file according to the example in .env.example.
3. Modify last_crawl_time.txt.


# 中文介绍

# 用户界面
用户可以在Teams Channel中看到以下推送。
![Message UI](/images/message_ui_Chinese.jpg)
- 最上方是GPT4给出的标题
- 第二行是更新的UTC时间
- 主体内容是GPT4对这次更新涉及到的不同文档的总结。比如例子中涉及了三个文档的更新。
- 点击链接可以进入官方文档。
- 最下方的“Go to commit page”按钮，可以跳转到GitHub的commit页面。

# Commit Page
https://github.com/MicrosoftDocs/azure-docs/commit/4189b431df9d28d94f54661e223c318335bcb9f2 

可以看到这次更新涉及了三个文件的修改，和GPT4给出的总结一致。
左边是更新前的版本，右边是更新后的版本。
![Commit Page](/images/commit_page.jpg)

通过点击右上角的Preview按钮，可以更直观地看到更新的内容。
https://github.com/MicrosoftDocs/azure-docs/commit/4189b431df9d28d94f54661e223c318335bcb9f2

![preview_button](/images/preview_button.jpg)
![preview_ui](/images/preview_ui.jpg)

# 原理：
- 以Azure OpenAI为例，文档的每次更新记录都会记录在 https://github.com/MicrosoftDocs/azure-docs/commits/main/articles/ai-services/openai 这个页面。
- 爬取每一个commit的更新内容
- 提交给GPT4进行总结，生成标题
- 通过Teams Channel Webhook将GPT4的总结推送到Teams Channel
- 程序每小时会去查询是否有新的commits生成

# 运行配置
1. pip install -r requirements
2. 接着创建.env文件 按照.env.example的示例
3. 修改last_crawl_time.txt

